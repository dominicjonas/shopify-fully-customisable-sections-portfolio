{%- style -%}
  .custom-header {
    background-color: #fff;
    font-family: Arial, sans-serif;
    color: #333;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .custom-header__top {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px 20px;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
    position: relative;
  }
  .custom-header__categories {
    position: absolute;
    left: 20px;
  }
  .custom-header__icons {
    position: absolute;
    right: 20px;
  }
  .custom-header__categories {
    position: absolute;
    left: 20px;
    list-style: none;
    display: flex;
    gap: 20px;
    margin: 0;
    padding: 0;
    text-transform: uppercase;
    font-size: 14px;
  }
  .custom-header__categories li {
    position: relative;
  }
  .custom-header__categories li a {
    color: #999;
    text-decoration: none;
    text-transform: capitalize;
  }
  .custom-header__categories li a:hover {
    color: #333;
  }
  .custom-header__logo {
    font-size: 24px;
    font-weight: bold;
    text-transform: uppercase;
  }
  .custom-header__icons {
    position: absolute;
    right: 20px;
    display: flex;
    gap: 15px;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  .custom-header__icons a {
    color: #333;
    text-decoration: none;
    font-size: 20px;
  }
  .custom-header__subnav {
    background-color: #fff;
    padding: 10px 20px;
    text-align: center;
  }
  .custom-header__subnav ul {
    list-style: none;
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 0;
    padding: 0;
    font-size: 14px;
  }
  .custom-header a {
    color: #999;
    text-decoration: none;
    text-transform: capitalize;
  }
  .custom-header a:hover {
    color: #333;
  }
  .sale-link {
    color: red;
  }
  .sale-link:hover {
    color: darkred;
  }
  .custom-header__divider {
    height: 1px;
    background-color: #dcdcdcff;
    width: 100%;
    margin: 0;
  }
  .custom-header__icons svg {
    width: 14px;
    height: 18px;
    display: inline-block;
    vertical-align: middle;
  }
  .custom-header__search {
    display: flex;
    align-items: center;
    gap: 16px;
    width: auto;
    height: 34px;
    padding: 8px 16px 8px 32px;
    font-size: 1rem;
    font-family: "Proxima Nova", "Helvetica Neue", Verdana, Arial, sans-serif;
    letter-spacing: 0.02rem;
    line-height: 22px;
    font-weight: 400;
    text-transform: none;
    color: rgb(26, 26, 26);
    background: rgb(248, 248, 248);
    border-radius: 4px;
    border: none;
    position: relative;
  }
  .custom-header__search::placeholder {
    color: #999;
  }
  .custom-header__search-wrapper {
    position: relative;
    display: flex;
    align-items: center;
  }
  .custom-header__search-icon {
    position: absolute;
    left: 12px;
    pointer-events: none;
    display: flex;
    align-items: center;
  }
  .custom-header__search-icon svg {
    width: 14px;
    height: 18px;
  }

@media screen and (max-width: 768px) {
  .custom-header__top {
    justify-content: space-between; /* better than center for mobile */
    padding: 12px 15px; /* slightly less padding */
    position: relative;
  }

  /* Hide categories on mobile (common pattern) */
  .custom-header__categories {
    display: none;
  }

  /* Center logo fully */
  .custom-header__logo {
    position: static; /* remove any absolute if added later */
    flex: 1;
    text-align: left;
    font-size: 22px; /* slightly smaller */
  }

  /* Make icons container full-width and centered */
  .custom-header__icons {
    position: static; /* remove absolute positioning */
    justify-content: center;
    gap: 20px; /* more breathing room between icons */
    width: auto;
    margin: 0 auto;
  }

  /* Make search more compact & centered-friendly */
  .custom-header__search-wrapper {
    margin: 0;
  }

  .custom-header__search {
    width: 120px; 
    padding: 8px 12px 8px 32px; 
    font-size: 0.95rem;
  }

  .custom-header__search-icon {
    left: 10px;
  }

  /* Icons size for better touch targets */
  .custom-header__icons svg {
    width: 12px;
    height: 12px;
  }

  /* Subnav - make it scrollable horizontally if too many links */
  .custom-header__subnav {
    padding: 8px 15px;
    overflow-x: auto;
    white-space: nowrap;
  }

  .custom-header__subnav ul {
    justify-content: center; 
    gap: 18px;
    flex-wrap: wrap;
  }

  .custom-header__subnav a {
    font-size: 13px;
    padding: 4px 0;
  }

  /* Optional: Add a subtle divider visual cue */
  .custom-header__divider {
    margin: 6px 0;
  }
}

/* Optional: Extra small screens (e.g. iPhone SE) */
@media screen and (max-width: 480px) {
  .custom-header__search {
    width: 120px;
  }

  .custom-header__icons {
    gap: 16px;
  }

  .custom-header__logo {
    font-size: 20px;
  }
}
{%- endstyle -%}

<div class="custom-header">
  <div class="custom-header__top">
    <ul class="custom-header__categories">
      {% for block in section.blocks %}
        {% if block.type == 'category' %}
          <li>
            <a href="{{ block.settings.url }}">{{ block.settings.label }}</a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>

    <div class="custom-header__logo">{{ section.settings.header_title }}</div>

    <ul class="custom-header__icons">
      <li>
        <div class="custom-header__search-wrapper">
          <input type="text" class="custom-header__search" id="header-search" placeholder="Search menswear..." aria-label="Search">
          <span class="custom-header__search-icon"><svg viewBox="256 1139 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" fill="#999"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path d="M269.46,1163.45 C263.17,1163.45 258.071,1158.44 258.071,1152.25 C258.071,1146.06 263.17,1141.04 269.46,1141.04 C275.75,1141.04 280.85,1146.06 280.85,1152.25 C280.85,1158.44 275.75,1163.45 269.46,1163.45 L269.46,1163.45 Z M287.688,1169.25 L279.429,1161.12 C281.591,1158.77 282.92,1155.67 282.92,1152.25 C282.92,1144.93 276.894,1139 269.46,1139 C262.026,1139 256,1144.93 256,1152.25 C256,1159.56 262.026,1165.49 269.46,1165.49 C272.672,1165.49 275.618,1164.38 277.932,1162.53 L286.224,1170.69 C286.629,1171.09 287.284,1171.09 287.688,1170.69 C288.093,1170.3 288.093,1169.65 287.688,1169.25 L287.688,1169.25 Z" id="search"></path></g></svg></span>
        </div>
      </li>
      <li><a href="/account" aria-label="Profile"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><circle cx="12" cy="8" r="4" fill="#999"></circle><path d="M4 20c0-4.418 3.582-8 8-8s8 3.582 8 8" fill="#999"></path></g></svg></a></li>
      <li><a href="/account" aria-label="Wishlist"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#999"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6.00019C10.2006 3.90317 7.19377 3.2551 4.93923 5.17534C2.68468 7.09558 2.36727 10.3061 4.13778 12.5772C5.60984 14.4654 10.0648 18.4479 11.5249 19.7369C11.6882 19.8811 11.7699 19.9532 11.8652 19.9815C11.9483 20.0062 12.0393 20.0062 12.1225 19.9815C12.2178 19.9532 12.2994 19.8811 12.4628 19.7369C13.9229 18.4479 18.3778 14.4654 19.8499 12.5772C21.6204 10.3061 21.3417 7.07538 19.0484 5.17534C16.7551 3.2753 13.7994 3.90317 12 6.00019Z" stroke="#999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></g></svg></a></li>
      <li><a href="/cart" aria-label="Cart"><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5285 6C16.5098 5.9193 16.4904 5.83842 16.4701 5.75746C16.2061 4.70138 15.7904 3.55383 15.1125 2.65C14.4135 1.71802 13.3929 1 12 1C10.6071 1 9.58648 1.71802 8.88749 2.65C8.20962 3.55383 7.79387 4.70138 7.52985 5.75747C7.50961 5.83842 7.49016 5.9193 7.47145 6H5.8711C4.29171 6 2.98281 7.22455 2.87775 8.80044L2.14441 19.8004C2.02898 21.532 3.40238 23 5.13777 23H18.8622C20.5976 23 21.971 21.532 21.8556 19.8004L21.1222 8.80044C21.0172 7.22455 19.7083 6 18.1289 6H16.5285ZM8 11C8.57298 11 8.99806 10.5684 9.00001 9.99817C9.00016 9.97438 9.00044 9.9506 9.00084 9.92682C9.00172 9.87413 9.00351 9.79455 9.00718 9.69194C9.01451 9.48652 9.0293 9.18999 9.05905 8.83304C9.08015 8.57976 9.10858 8.29862 9.14674 8H14.8533C14.8914 8.29862 14.9198 8.57976 14.941 8.83305C14.9707 9.18999 14.9855 9.48652 14.9928 9.69194C14.9965 9.79455 14.9983 9.87413 14.9992 9.92682C14.9996 9.95134 14.9999 9.97587 15 10.0004C15 10.0004 15 11 16 11C17 11 17 9.99866 17 9.99866C16.9999 9.9636 16.9995 9.92854 16.9989 9.89349C16.9978 9.829 16.9957 9.7367 16.9915 9.62056C16.9833 9.38848 16.9668 9.06001 16.934 8.66695C16.917 8.46202 16.8953 8.23812 16.8679 8H18.1289C18.6554 8 19.0917 8.40818 19.1267 8.93348L19.86 19.9335C19.8985 20.5107 19.4407 21 18.8622 21H5.13777C4.55931 21 4.10151 20.5107 4.13998 19.9335L4.87332 8.93348C4.90834 8.40818 5.34464 8 5.8711 8H7.13208C7.10465 8.23812 7.08303 8.46202 7.06595 8.66696C7.0332 9.06001 7.01674 9.38848 7.00845 9.62056C7.0043 9.7367 7.00219 9.829 7.00112 9.89349C7.00054 9.92785 7.00011 9.96221 7 9.99658C6.99924 10.5672 7.42833 11 8 11ZM9.53352 6H14.4665C14.2353 5.15322 13.921 4.39466 13.5125 3.85C13.0865 3.28198 12.6071 3 12 3C11.3929 3 10.9135 3.28198 10.4875 3.85C10.079 4.39466 9.76472 5.15322 9.53352 6Z" fill="#999"></path></g></svg></a></li>
    </ul>
  </div>

  <div class="custom-header__divider"></div>

  <nav class="custom-header__subnav">
    <ul>
      {% for block in section.blocks %}
        {% if block.type == 'sub_link' %}
          <li>
            <a href="{{ block.settings.url }}" {% if block.settings.label == 'Sale' %}class="sale-link"{% endif %}>{{ block.settings.label }}</a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </nav>
</div>

{% schema %}
{
  "name": "Custom Header",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "header_title",
      "label": "Header Title",
      "default": "HERON."
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Top Category",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Category Label",
          "default": "Men"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Category URL"
        }
      ]
    },
    {
      "type": "sub_link",
      "name": "Sub-Nav Link",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Link Label",
          "default": "Sale"
        },
        {
          "type": "url",
          "id": "url",
          "label": "Link URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Header",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "label": "MEN",
            "url": "/collections/menswear"
          }
        },
        {
          "type": "category",
          "settings": {
            "label": "WOMEN",
            "url": "/collections/womenswear"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Sale",
            "url": "/collections/sale"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "New In",
            "url": "/collections/new-in"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Brands",
            "url": "/brands"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Clothing",
            "url": "/collections/clothing"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Footwear",
            "url": "/collections/footwear"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Accessories",
            "url": "/collections/accessories"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Lifestyle",
            "url": "/collections/lifestyle"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "HERON. Label",
            "url": "/collections/heron-label"
          }
        },
        {
          "type": "sub_link",
          "settings": {
            "label": "Launches",
            "url": "/launches"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const categoryLinks = document.querySelectorAll('.custom-header__categories a');
    const searchInput = document.getElementById('header-search');
    
    if (!categoryLinks.length || !searchInput) return;
    
    // Set MEN as default active
    const firstLink = categoryLinks[0];
    if (firstLink) {
      firstLink.classList.add('active');
      updateSearchPlaceholder(firstLink.textContent);
    }
    
    // Add click handlers to category links
    categoryLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Remove active class from all links
        categoryLinks.forEach(l => l.classList.remove('active'));
        
        // Add active class to clicked link
        this.classList.add('active');
        
        // Update search placeholder
        updateSearchPlaceholder(this.textContent);
      });
    });
    
    function updateSearchPlaceholder(categoryText) {
      const cleanText = categoryText.trim().toLowerCase();
      searchInput.placeholder = `Search ${cleanText}`;
    }
  });
</script>